<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div id="mainPane" class="main pane">
      <div class="top">
        <div class="header">
          <div class="title">
            <p>granblue.team</p>
            <h1>Data Extractor</h1>
          </div>
          <img
            id="avatar"
            class="avatar"
            src="https://granblue.team/profile/npc@2x.png"
          />
        </div>

        <div class="message">
          <p>
            This extension passively captures your game data as you browse.
            No additional requests are made to GBF servers.
          </p>
        </div>
      </div>

      <!-- Cache Status Section -->
      <div id="cache-status" class="cache-status">
        <div class="cache-header">
          <span class="cache-title">Captured Data</span>
          <span class="cache-hint">Click to select</span>
          <button id="clearCacheButton" class="btn-link">Clear all</button>
        </div>
        <div id="cache-items" class="cache-items">
          <p class="cache-empty">Browse the game to capture data</p>
        </div>
      </div>

      <!-- Export/Copy Buttons -->
      <div id="export-container" class="buttons">
        <div class="notice import" id="import-notice">
          <p id="import-status"></p>
        </div>
        <div class="site-selector">
          <label for="siteSelect">Export to:</label>
          <select id="siteSelect">
            <option value="production">granblue.team</option>
            <option value="staging">next.granblue.team</option>
          </select>
        </div>
        <a id="exportButton" class="button btn-green" disabled>Export</a>
        <a id="copyButton" class="button btn-white" disabled>Copy JSON</a>
      </div>

      <!-- Warning Notice -->
      <div id="warning" class="notice">
        <div class="notice-text">
          <p>
            This extension only reads data your browser has already received.
            It does NOT make additional requests to GBF servers or modify game behavior.
          </p>
          <p>
            While this is the safest approach, third-party tools are technically
            against Terms of Service. Use at your own risk.
          </p>
          <p>
            granblue.team assumes no responsibility for any account suspensions
            or bans that may result from its use.
          </p>
        </div>
        <a id="acknowledgeButton" class="button btn-stroke small"
          >I understand</a
        >
      </div>

      <!-- Auth Buttons (hidden when logged in) -->
      <div id="main-buttons" class="buttons">
        <a
          id="signupButton"
          class="button btn-green"
          target="_blank"
          href="https://granblue.team/auth/register"
          >Sign up</a
        >
        <a id="showLogin" class="button btn-white">Log in</a>
      </div>
    </div>

    <!-- Login Pane (slides in from the right) -->
    <div id="loginPane" class="sliding pane login">
      <div class="header">
        <div class="title">
          <p>granblue.team</p>
          <h1>Log in</h1>
        </div>
        <button id="backToMain" class="close">&times;</button>
      </div>
      <div id="loginForm" class="subsection">
        <input type="text" id="loginUsername" placeholder="Email address" />
        <input type="password" id="loginPassword" placeholder="Password" />
        <a id="loginButton" class="button btn-green">Login</a>
      </div>
      <div id="loginStatus"></div>
    </div>

    <!-- Logged-In Pane (slides in from the right) -->
    <div id="loggedInPane" class="sliding pane logged-in">
      <div class="header">
        <div class="title">
          <p>granblue.team</p>
          <h1 id="loggedInUsername">Username</h1>
        </div>
        <button id="closeLoggedInPane" class="close">&times;</button>
      </div>

      <a id="showWarning" class="link">Show extension disclaimer</a>

      <div class="buttons">
        <a id="goToProfileButton" class="button btn-white">Go to profile</a>
        <a id="logoutButton" class="button btn-white">Log out</a>
      </div>
    </div>

    <script type="module" src="popup.js"></script>
  </body>
</html>
